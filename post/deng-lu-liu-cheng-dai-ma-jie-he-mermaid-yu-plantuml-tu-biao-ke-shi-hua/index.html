<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>ç™»å½•æµç¨‹ä»£ç ï¼Œç»“åˆ Mermaid ä¸ PlantUML å›¾è¡¨å¯è§†åŒ– | fishyue</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://yuzhupeng.top/myblogs//favicon.ico?v=1755503043926">
<link rel="stylesheet" href="https://yuzhupeng.top/myblogs//styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="
ä¼ä¸šç»Ÿä¸€ç™»å½•æµç¨‹å›¾æ–‡è§£æï¼ˆå« Mermaid ä¸ PlantUML å¯è§†åŒ–ï¼‰
æœ¬æ–‡ç»“åˆå‰åç«¯å®ç°ä»£ç ï¼Œå¯¹ä¸€ä¸ªé›†æˆäº†æ‹¼å›¾éªŒè¯ç ä¸ADåŸŸè®¤è¯çš„è´¦å·å¯†ç ç™»å½•æµç¨‹è¿›è¡Œå¯è§†åŒ–è¯´æ˜ã€‚æˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨ Mermaid ä¸ PlantUML è¿›è¡Œæ—¶åºå›¾ä¸æµç¨‹..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://yuzhupeng.top/myblogs/">
        <img src="https://yuzhupeng.top/myblogs//images/avatar.png?v=1755503043926" class="site-logo">
        <h1 class="site-title">fishyue</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/myblogs" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/myblogs/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/myblogs/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/myblogs/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/yuzhupeng" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      ç”±å¥¢å…¥ä¿­éš¾ï¼Œç”±ä¿­å…¥å¥¢æ˜“
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/yuzhupeng" target="_blank">Fishyue</a> | <a class="rss" href="https://yuzhupeng.top/myblogs//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">ç™»å½•æµç¨‹ä»£ç ï¼Œç»“åˆ Mermaid ä¸ PlantUML å›¾è¡¨å¯è§†åŒ–</h2>
            <div class="post-date">2025-06-04</div>
            
            <div class="post-content" v-pre>
              <hr>
<h1 id="ä¼ä¸šç»Ÿä¸€ç™»å½•æµç¨‹å›¾æ–‡è§£æå«-mermaid-ä¸-plantuml-å¯è§†åŒ–">ä¼ä¸šç»Ÿä¸€ç™»å½•æµç¨‹å›¾æ–‡è§£æï¼ˆå« Mermaid ä¸ PlantUML å¯è§†åŒ–ï¼‰</h1>
<p>æœ¬æ–‡ç»“åˆå‰åç«¯å®ç°ä»£ç ï¼Œå¯¹ä¸€ä¸ªé›†æˆäº†<strong>æ‹¼å›¾éªŒè¯ç </strong>ä¸<strong>ADåŸŸè®¤è¯</strong>çš„è´¦å·å¯†ç ç™»å½•æµç¨‹è¿›è¡Œå¯è§†åŒ–è¯´æ˜ã€‚æˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨ <strong>Mermaid</strong> ä¸ <strong>PlantUML</strong> è¿›è¡Œæ—¶åºå›¾ä¸æµç¨‹å›¾çš„ç»˜åˆ¶ï¼Œä»¥ä¾¿äºå¼€å‘å›¢é˜Ÿç†è§£æ•´ä½“ä¸šåŠ¡æµç¨‹ã€‚</p>
<hr>
<h2 id="ç™»å½•æµç¨‹æ¦‚è§ˆ">ğŸ§© ç™»å½•æµç¨‹æ¦‚è§ˆ</h2>
<p>ç”¨æˆ·é€šè¿‡å‰ç«¯é¡µé¢æäº¤è´¦å·å¯†ç ï¼Œç³»ç»Ÿå…ˆè¿›è¡Œæ‹¼å›¾éªŒè¯ï¼Œå†æ ¹æ®æ˜¯å¦ä¸ºç³»ç»Ÿå·²æœ‰ç”¨æˆ·å†³å®šèµ°æœ¬åœ°æ ¡éªŒæˆ– AD åŸŸè®¤è¯ï¼Œå¹¶æœ€ç»ˆå®Œæˆ token çš„ç”Ÿæˆä¸ç™»å½•è·³è½¬ã€‚</p>
<hr>
<h2 id="mermaid-æµç¨‹å›¾ç®€æ´ç»“æ„">ğŸ“Š Mermaid æµç¨‹å›¾ï¼ˆç®€æ´ç»“æ„ï¼‰</h2>
<pre><code class="language-mermaid">flowchart TD
  A[ç”¨æˆ·ç‚¹å‡»ç™»å½•æŒ‰é’®] --&gt; B[handleSubmit è°ƒç”¨]
  B --&gt; C[åˆå§‹åŒ–æ‹¼å›¾éªŒè¯ç  verifyInit]
  C --&gt; D[ç”¨æˆ·éªŒè¯é€šè¿‡]
  D --&gt; E[è°ƒç”¨ API: /userLogin]
  E --&gt; F[åç«¯æ¥æ”¶å‚æ•°: username, password, truthpassword, uuid]

  F --&gt; G{ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ç”¨æˆ·ï¼Ÿ}
  G -- å¦ --&gt; H[è·å– accessToken]
  H --&gt; I[è°ƒç”¨ AD åŸŸè®¤è¯æ¥å£]
  I --&gt; J{ADè®¤è¯æ˜¯å¦é€šè¿‡ï¼Ÿ}
  J -- å¦ --&gt; K[è¿”å›é”™è¯¯ï¼šADè®¤è¯å¤±è´¥]
  J -- æ˜¯ --&gt; L[è°ƒç”¨ AD æ¥å£è·å–å‘˜å·¥ä¿¡æ¯]
  L --&gt; M{æ˜¯å¦æŸ¥åˆ°å‘˜å·¥ä¿¡æ¯ï¼Ÿ}
  M -- å¦ --&gt; N[æ ¹æ®å·¥å·å†æ¬¡è·å–å‘˜å·¥ä¿¡æ¯]
  N --&gt; O[æ³¨å†Œä¸ºæ–°ç”¨æˆ·]
  M -- æ˜¯ --&gt; O

  G -- æ˜¯ --&gt; P[æœ¬åœ°æ ¡éªŒå¯†ç ]
  P --&gt; Q{å¯†ç éªŒè¯æ˜¯å¦é€šè¿‡ï¼Ÿ}
  Q -- æ˜¯ --&gt; R[ç™»å½•æˆåŠŸ]
  Q -- å¦ --&gt; S[å°è¯• AD è®¤è¯]
  S --&gt; T{ADè®¤è¯æ˜¯å¦é€šè¿‡ï¼Ÿ}
  T -- å¦ --&gt; U[è¿”å›é”™è¯¯ï¼šå¯†ç é”™è¯¯]
  T -- æ˜¯ --&gt; V[æ›´æ–°æœ¬åœ°å¯†ç ]

  O --&gt; R
  V --&gt; R
  R --&gt; W[åˆ›å»º Token]
  W --&gt; X[è¿”å› Token åˆ°å‰ç«¯]
  X --&gt; Y[å‰ç«¯å­˜å‚¨ Token å¹¶è·³è½¬é¦–é¡µ]
</code></pre>
<blockquote>
<p>âœ… å»ºè®®ä½¿ç”¨æ”¯æŒ Mermaid çš„ Markdown ç¼–è¾‘å™¨ï¼ˆå¦‚ Typoraã€Obsidianã€VS Code æ’ä»¶ï¼‰è¿›è¡Œæ¸²æŸ“ã€‚<br>
<img src="https://yuzhupeng.top/myblogs//post-images/1749008217718.png" alt="" loading="lazy"></p>
</blockquote>
<hr>
<h2 id="plantuml-æ—¶åºå›¾å®Œæ•´è°ƒç”¨å…³ç³»">â± PlantUML æ—¶åºå›¾ï¼ˆå®Œæ•´è°ƒç”¨å…³ç³»ï¼‰</h2>
<pre><code class="language-plantuml">@startuml
actor ç”¨æˆ·
participant &quot;å‰ç«¯ Login.vue&quot; as Frontend
participant &quot;åç«¯ Controller&quot; as Controller
participant &quot;MemberService&quot; as Service
participant &quot;ADMemberSyncService&quot; as ADService
participant &quot;TokenService&quot; as TokenService

ç”¨æˆ· -&gt; Frontend: è¾“å…¥ç”¨æˆ·å/å¯†ç \nç‚¹å‡»ç™»å½•
Frontend -&gt; Frontend: verify.init() éªŒè¯ç æ ¡éªŒ
Frontend -&gt; ç”¨æˆ·: å±•ç¤ºæ‹¼å›¾éªŒè¯ç 
ç”¨æˆ· -&gt; Frontend: éªŒè¯é€šè¿‡
Frontend -&gt; Controller: POST /userLogin\nusername + password + truthpassword + uuid

Controller -&gt; Service: usernameLogin(username, password, truthpassword)

alt ç”¨æˆ·ä¸å­˜åœ¨
  Service -&gt; ADService: getAccessToken()
  Service -&gt; ADService: adAuthenticate(username, truthpassword, accessToken)
  alt è®¤è¯å¤±è´¥
    ADService --&gt; Service: false
    Service -&gt; Controller: è¿”å›é”™è¯¯
  else è®¤è¯æˆåŠŸ
    Service -&gt; ADService: getEmployeeInfo(username, accessToken)
    alt æœªè·å–æˆåŠŸ
      Service -&gt; ADService: getEmployeeInfoByWorkNumber(username)
    end
    Service -&gt; Service: åˆ›å»ºæ–°ç”¨æˆ·(member)
  end
else ç”¨æˆ·å­˜åœ¨
  Service -&gt; Service: æ ¡éªŒæœ¬åœ°å¯†ç 
  alt å¯†ç æ­£ç¡®
    Service -&gt; TokenService: åˆ›å»º token
  else å¯†ç é”™è¯¯
    Service -&gt; ADService: getAccessToken()
    Service -&gt; ADService: adAuthenticate(username, truthpassword, accessToken)
    alt ADè®¤è¯å¤±è´¥
      Service -&gt; Controller: è¿”å›é”™è¯¯
    else ADè®¤è¯æˆåŠŸ
      Service -&gt; Service: æ›´æ–°æœ¬åœ°å¯†ç 
      Service -&gt; TokenService: åˆ›å»º token
    end
  end
end

TokenService --&gt; Service: è¿”å› token
Service --&gt; Controller: è¿”å› accessToken/refreshToken
Controller --&gt; Frontend: ç™»å½•æˆåŠŸ
Frontend -&gt; ç”¨æˆ·: è·³è½¬é¦–é¡µ
@enduml
</code></pre>
<blockquote>
<p>âœ… å¯é€šè¿‡ <a href="https://www.plantuml.com/plantuml/">PlantUML Live</a> æˆ– VS Code æ’ä»¶è¿›è¡Œå¯è§†åŒ–ã€‚<br>
<img src="https://yuzhupeng.top/myblogs//post-images/1749008228294.png" alt="" loading="lazy"><br>
<img src="https://yuzhupeng.top/myblogs//post-images/1749008234309.png" alt="" loading="lazy"></p>
</blockquote>
<hr>
<h2 id="æ€»ç»“">ğŸ” æ€»ç»“</h2>
<ul>
<li>ç™»å½•æµç¨‹ä¸­ä½¿ç”¨äº† <strong>åŒé‡æ ¡éªŒæœºåˆ¶</strong>ï¼šå…ˆæœ¬åœ°å¯†ç æ ¡éªŒï¼Œå†è¡¥å¿æ€§è°ƒç”¨ AD åŸŸè®¤è¯ã€‚</li>
<li>ç”¨æˆ·ä¸å­˜åœ¨æ—¶ï¼Œä¹Ÿèƒ½é€šè¿‡ AD ä¿¡æ¯è‡ªåŠ¨å»ºæ¡£ï¼Œåšåˆ°ã€Œæ— ç¼å¼•å¯¼å…¥ç³»ç»Ÿã€ã€‚</li>
<li>å›¾è¡¨å·¥å…·å¦‚ <strong>Mermaid</strong> æ›´é€‚åˆæ¦‚è§ˆç±»å±•ç¤ºï¼Œ<strong>PlantUML</strong> åˆ™é€‚åˆè¯¦ç»†é“¾è·¯è·Ÿè¸ªã€‚</li>
</ul>
<hr>

            </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://yuzhupeng.top/myblogs/post/umljian-mo-yu-she-ji/">
                  <h3 class="post-title">
                    `uml`å»ºæ¨¡ä¸è®¾è®¡
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>

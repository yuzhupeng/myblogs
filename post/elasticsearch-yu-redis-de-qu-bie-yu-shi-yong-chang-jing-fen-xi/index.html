<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Elasticsearch ä¸ Redis çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯åˆ†æ | fishyue</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://yuzhupeng.top/myblogs//favicon.ico?v=1755503043926">
<link rel="stylesheet" href="https://yuzhupeng.top/myblogs//styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="ä»¥ä¸‹æ˜¯å…³äº Elasticsearch ä¸ Redis çš„åŒºåˆ«åŠå…¶ä½¿ç”¨åœºæ™¯ çš„ Markdown ç»“æ„åŒ–è¾“å‡ºæ–‡ç« ï¼Œé€‚åˆç”¨äºæ–‡æ¡£ã€åšå®¢æˆ–æŠ€æœ¯åˆ†äº«ï¼š

Elasticsearch ä¸ Redis çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯åˆ†æ
ä¸€ã€æ¦‚è¿°
Elastics..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://yuzhupeng.top/myblogs/">
        <img src="https://yuzhupeng.top/myblogs//images/avatar.png?v=1755503043926" class="site-logo">
        <h1 class="site-title">fishyue</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/myblogs" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/myblogs/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/myblogs/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/myblogs/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/yuzhupeng" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      ç”±å¥¢å…¥ä¿­éš¾ï¼Œç”±ä¿­å…¥å¥¢æ˜“
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/yuzhupeng" target="_blank">Fishyue</a> | <a class="rss" href="https://yuzhupeng.top/myblogs//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Elasticsearch ä¸ Redis çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯åˆ†æ</h2>
            <div class="post-date">2025-06-25</div>
            
            <div class="post-content" v-pre>
              <p>ä»¥ä¸‹æ˜¯å…³äº <strong>Elasticsearch ä¸ Redis çš„åŒºåˆ«åŠå…¶ä½¿ç”¨åœºæ™¯</strong> çš„ Markdown ç»“æ„åŒ–è¾“å‡ºæ–‡ç« ï¼Œé€‚åˆç”¨äºæ–‡æ¡£ã€åšå®¢æˆ–æŠ€æœ¯åˆ†äº«ï¼š</p>
<hr>
<h1 id="elasticsearch-ä¸-redis-çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯åˆ†æ">Elasticsearch ä¸ Redis çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯åˆ†æ</h1>
<h2 id="ä¸€-æ¦‚è¿°">ä¸€ã€æ¦‚è¿°</h2>
<p>Elasticsearchï¼ˆç®€ç§° ESï¼‰å’Œ Redis æ˜¯ä¸¤ç§å¹¿æ³›åº”ç”¨çš„æ•°æ®å­˜å‚¨ä¸å¤„ç†ç³»ç»Ÿï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡ç›®æ ‡ã€æ•°æ®ç»“æ„ã€æŸ¥è¯¢èƒ½åŠ›å’Œå…¸å‹ä½¿ç”¨åœºæ™¯ç­‰æ–¹é¢å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚</p>
<hr>
<h2 id="äºŒ-æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”">äºŒã€æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”</h2>
<table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>Elasticsearch</th>
<th>Redis</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ ¸å¿ƒå®šä½</strong></td>
<td>æœç´¢å¼•æ“ / åˆ†å¸ƒå¼æ–‡æ¡£æ•°æ®åº“</td>
<td>å†…å­˜æ•°æ®åº“ / ç¼“å­˜ä¸å®æ—¶å¤„ç†ç³»ç»Ÿ</td>
</tr>
<tr>
<td><strong>æ•°æ®å­˜å‚¨ç»“æ„</strong></td>
<td>å€’æ’ç´¢å¼• + JSON æ–‡æ¡£</td>
<td>é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰+ å¤šç§å†…å­˜æ•°æ®ç»“æ„</td>
</tr>
<tr>
<td><strong>æ•°æ®æŒä¹…åŒ–</strong></td>
<td>æ”¯æŒæŒä¹…åŒ–å’Œå‰¯æœ¬</td>
<td>æ”¯æŒæŒä¹…åŒ–ï¼ˆRDB / AOFï¼‰</td>
</tr>
<tr>
<td><strong>æŸ¥è¯¢èƒ½åŠ›</strong></td>
<td>å¼ºå¤§çš„å…¨æ–‡æ£€ç´¢ã€èšåˆåˆ†æ</td>
<td>åŸºç¡€é”®æŸ¥è¯¢ + æ•°æ®ç»“æ„æ“ä½œ</td>
</tr>
<tr>
<td><strong>è®¿é—®é€Ÿåº¦</strong></td>
<td>æ¯«ç§’çº§ï¼Œé€‚åˆåˆ†æ</td>
<td>å¾®ç§’çº§ï¼Œé€‚åˆå®æ—¶å“åº”</td>
</tr>
<tr>
<td><strong>æ‰©å±•èƒ½åŠ›</strong></td>
<td>åŸç”Ÿåˆ†å¸ƒå¼æ¶æ„ï¼Œè‡ªåŠ¨åˆ†ç‰‡</td>
<td>æ”¯æŒé›†ç¾¤ï¼Œä½†å¤æ‚åº¦æ›´é«˜</td>
</tr>
<tr>
<td><strong>åº”ç”¨é¢†åŸŸ</strong></td>
<td>æœç´¢ã€æ—¥å¿—ã€æ•°æ®åˆ†æ</td>
<td>ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="ä¸‰-elasticsearch-çš„å…¸å‹ä½¿ç”¨åœºæ™¯">ä¸‰ã€Elasticsearch çš„å…¸å‹ä½¿ç”¨åœºæ™¯</h2>
<h3 id="1-å…¨æ–‡æœç´¢å¼•æ“">1. å…¨æ–‡æœç´¢å¼•æ“</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šES æ„å»ºäºå€’æ’ç´¢å¼•ä¹‹ä¸Šï¼Œæ”¯æŒåˆ†è¯ã€æ¨¡ç³ŠæŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šç”µå•†å¹³å°å•†å“æœç´¢ã€çŸ¥è¯†åº“æ–‡æ¡£æ£€ç´¢ã€‚</li>
</ul>
<h3 id="2-æ—¥å¿—æ”¶é›†ä¸åˆ†æelk-stack">2. æ—¥å¿—æ”¶é›†ä¸åˆ†æï¼ˆELK Stackï¼‰</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šä¸ Logstashã€Kibana ç»„åˆï¼Œæ„å»ºå®æ—¶æ—¥å¿—ç›‘æ§å¹³å°ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šç³»ç»Ÿæ—¥å¿—åˆ†æã€å¼‚å¸¸æ£€æµ‹ã€è¿ç»´ç›‘æ§ã€‚</li>
</ul>
<h3 id="3-å®æ—¶æ•°æ®èšåˆä¸-bi-å¯è§†åŒ–">3. å®æ—¶æ•°æ®èšåˆä¸ BI å¯è§†åŒ–</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šES èšåˆèƒ½åŠ›å¼ºï¼Œé€‚åˆé«˜ç»´åº¦å¤šå­—æ®µçš„å¿«é€Ÿæ±‡æ€»ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šç”¨æˆ·è¡Œä¸ºåˆ†æã€é”€å”®æŠ¥è¡¨åˆ†æã€‚</li>
</ul>
<h3 id="4-å®‰å…¨äº‹ä»¶ç›‘æ§siem">4. å®‰å…¨äº‹ä»¶ç›‘æ§ï¼ˆSIEMï¼‰</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šå­˜å‚¨å’Œåˆ†æå®‰å…¨æ—¥å¿—ã€å®¡è®¡æ—¥å¿—ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šå…¥ä¾µæ£€æµ‹ç³»ç»Ÿã€ç½‘ç»œè®¿é—®è¡Œä¸ºåˆ†æã€‚</li>
</ul>
<h3 id="5-æ¨èç³»ç»Ÿ">5. æ¨èç³»ç»Ÿ</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šé€šè¿‡å­—æ®µæŸ¥è¯¢ã€èšåˆæ”¯æŒå®æ—¶æ¨èã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šç›¸å…³æ¨èã€ä¸ªæ€§åŒ–å†…å®¹æ¨é€ã€‚</li>
</ul>
<hr>
<h2 id="å››-redis-çš„å…¸å‹ä½¿ç”¨åœºæ™¯">å››ã€Redis çš„å…¸å‹ä½¿ç”¨åœºæ™¯</h2>
<h3 id="1-é«˜æ€§èƒ½ç¼“å­˜">1. é«˜æ€§èƒ½ç¼“å­˜</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šå†…å­˜è¯»å–å¿«ï¼Œé€‚åˆå­˜æ”¾çƒ­ç‚¹æ•°æ®ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šé¡µé¢ç¼“å­˜ã€æ•°æ®åº“æŸ¥è¯¢ç¼“å­˜ã€ç”¨æˆ·ä¿¡æ¯ç¼“å­˜ã€‚</li>
</ul>
<h3 id="2-æ¶ˆæ¯é˜Ÿåˆ—ä¸å‘å¸ƒè®¢é˜…">2. æ¶ˆæ¯é˜Ÿåˆ—ä¸å‘å¸ƒè®¢é˜…</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šæ”¯æŒ Listï¼ˆåˆ—è¡¨ï¼‰ã€Pub/Sub æ¨¡å‹ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šä»»åŠ¡å¼‚æ­¥å¤„ç†ã€é€šçŸ¥æ¨é€ç³»ç»Ÿã€‚</li>
</ul>
<h3 id="3-ä¼šè¯ç®¡ç†">3. ä¼šè¯ç®¡ç†</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šç”¨äºå­˜å‚¨çŸ­æœŸçŠ¶æ€æ•°æ®ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ä¿¡æ¯ã€ç”¨æˆ·è®¾ç½®ã€‚</li>
</ul>
<h3 id="4-å®æ—¶æ’è¡Œæ¦œä¸è®¡æ•°å™¨">4. å®æ—¶æ’è¡Œæ¦œä¸è®¡æ•°å™¨</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šSorted Set æ•°æ®ç»“æ„æ”¯æŒæ’åºä¸æƒé‡ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šæ¸¸æˆæ’åã€æµè§ˆé‡ç»Ÿè®¡ã€æ‰“åˆ†ç³»ç»Ÿã€‚</li>
</ul>
<h3 id="5-åˆ†å¸ƒå¼é”ä¸åè°ƒæœºåˆ¶">5. åˆ†å¸ƒå¼é”ä¸åè°ƒæœºåˆ¶</h3>
<ul>
<li><strong>è¯´æ˜</strong>ï¼šåˆ©ç”¨ SETNXã€Lua è„šæœ¬ç­‰å®ç°é«˜æ€§èƒ½åˆ†å¸ƒå¼é”ã€‚</li>
<li><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼šåº“å­˜æ§åˆ¶ã€å¹‚ç­‰æ§åˆ¶ã€ä»»åŠ¡æ’ä»–æ‰§è¡Œã€‚</li>
</ul>
<hr>
<h2 id="äº”-æ€»ç»“">äº”ã€æ€»ç»“</h2>
<table>
<thead>
<tr>
<th>åº”ç”¨éœ€æ±‚</th>
<th>æ¨èæ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>éœ€è¦å¼ºæœç´¢ä¸å¤æ‚æŸ¥è¯¢</strong></td>
<td>âœ… Elasticsearch</td>
</tr>
<tr>
<td><strong>éœ€è¦å®æ—¶ç¼“å­˜ä¸å¿«é€Ÿè®¿é—®</strong></td>
<td>âœ… Redis</td>
</tr>
<tr>
<td><strong>æ—¥å¿—é›†ä¸­ç®¡ç†ä¸å¯è§†åŒ–åˆ†æ</strong></td>
<td>âœ… Elasticsearchï¼ˆé…åˆ ELKï¼‰</td>
</tr>
<tr>
<td><strong>é«˜å¹¶å‘ä¸‹çš„ä¸´æ—¶æ•°æ®ç¼“å­˜</strong></td>
<td>âœ… Redis</td>
</tr>
<tr>
<td><strong>æ„å»ºæœç´¢+ç¼“å­˜ç³»ç»Ÿ</strong></td>
<td>âœ… Elasticsearch + Redis ç»„åˆ</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="å…­-å‚è€ƒå»ºè®®">å…­ã€å‚è€ƒå»ºè®®</h2>
<ul>
<li>äºŒè€…<strong>ä¸æ˜¯äº’æ–¥å…³ç³»</strong>ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¸¸å¸¸ <strong>ç»„åˆä½¿ç”¨</strong>ï¼Œä¾‹å¦‚ï¼š
<ul>
<li>æœç´¢ç»“æœç”± Elasticsearch æä¾›ï¼›</li>
<li>æœç´¢å†å²ã€çƒ­é—¨å…³é”®è¯ç”± Redis ç¼“å­˜ï¼›</li>
<li>ç”¨æˆ·è¡Œä¸ºæ•°æ®è¿›å…¥ Redis é˜Ÿåˆ—å†å¼‚æ­¥å†™å…¥ ESã€‚</li>
</ul>
</li>
</ul>
<hr>
<p>Elasticsearchï¼ˆç®€ç§° ESï¼‰è™½ç„¶é€šå¸¸è¢«ç§°ä¸ºæœç´¢å¼•æ“ï¼Œä½†å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>åˆ†å¸ƒå¼æ–‡æ¡£æ•°æ®åº“</strong>ï¼Œå…¶<strong>å­˜å‚¨æ€§èƒ½</strong>ä¹‹å¼ºã€<strong>æ•°æ®ç»“æ„è®¾è®¡</strong>ä¹‹å¤æ‚ï¼Œè¿œéä¼ ç»Ÿ RDBMS æ‰€èƒ½æ¯”æ‹Ÿã€‚ä¸‹é¢å°†ä»åº•å±‚ç»“æ„ã€å­˜å‚¨æ–¹å¼ã€ç´¢å¼•æœºåˆ¶ç­‰æ–¹é¢è¯¦ç»†è®²è§£ã€‚</p>
<hr>
<h1 id="elasticsearch-å­˜å‚¨æ€§èƒ½ä¸æ•°æ®ç»“æ„è¯¦è§£">Elasticsearch å­˜å‚¨æ€§èƒ½ä¸æ•°æ®ç»“æ„è¯¦è§£</h1>
<hr>
<h2 id="ä¸€-elasticsearch-çš„æ•°æ®åŸºæœ¬å•ä½">ä¸€ã€Elasticsearch çš„æ•°æ®åŸºæœ¬å•ä½</h2>
<h3 id="1-documentæ–‡æ¡£">1. <strong>Documentï¼ˆæ–‡æ¡£ï¼‰</strong></h3>
<ul>
<li>ES å­˜å‚¨çš„æœ€å°å•å…ƒï¼Œå®è´¨æ˜¯ä¸€ä¸ª <strong>JSON æ ¼å¼å¯¹è±¡</strong>ã€‚</li>
<li>ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸€è¡Œæ•°æ®ï¼ˆRowï¼‰ã€‚</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="language-json">{
  &quot;user&quot;: &quot;alice&quot;,
  &quot;message&quot;: &quot;Elasticsearch is fast!&quot;,
  &quot;timestamp&quot;: &quot;2025-06-25T09:00:00&quot;
}
</code></pre>
<h3 id="2-indexç´¢å¼•">2. <strong>Indexï¼ˆç´¢å¼•ï¼‰</strong></h3>
<ul>
<li>å­˜æ”¾æ–‡æ¡£çš„é€»è¾‘ç©ºé—´ï¼Œç±»ä¼¼äºæ•°æ®åº“ä¸­çš„â€œè¡¨â€ã€‚</li>
<li>ä¸€ä¸ªç´¢å¼•ä¸‹åŒ…å«å¤šä¸ªæ–‡æ¡£ï¼Œå…·æœ‰ç›¸åŒæˆ–ç±»ä¼¼çš„å­—æ®µç»“æ„ã€‚</li>
</ul>
<h3 id="3-shardåˆ†ç‰‡ä¸-replicaå‰¯æœ¬">3. <strong>Shardï¼ˆåˆ†ç‰‡ï¼‰ä¸ Replicaï¼ˆå‰¯æœ¬ï¼‰</strong></h3>
<ul>
<li>ä¸ºäº†æé«˜æ€§èƒ½å’Œå®¹é”™èƒ½åŠ›ï¼ŒES è‡ªåŠ¨å°†ç´¢å¼•åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ª <strong>ä¸»åˆ†ç‰‡ï¼ˆPrimary Shardsï¼‰</strong>ï¼Œæ¯ä¸ªä¸»åˆ†ç‰‡å¯ä»¥é…ç½®å¤šä¸ª <strong>å‰¯æœ¬åˆ†ç‰‡ï¼ˆReplica Shardsï¼‰</strong>ã€‚</li>
<li>åˆ†ç‰‡æ˜¯æœ€å°çš„ç‰©ç†å­˜å‚¨å•ä½ã€‚</li>
</ul>
<hr>
<h2 id="äºŒ-åº•å±‚å­˜å‚¨æ¶æ„lucene">äºŒã€åº•å±‚å­˜å‚¨æ¶æ„ï¼ˆLuceneï¼‰</h2>
<p>Elasticsearch æ„å»ºåœ¨ <strong>Apache Lucene</strong> ä¹‹ä¸Šï¼ŒLucene æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„å…¨æ–‡æœç´¢åº“ã€‚å…¶åº•å±‚ç»“æ„å¦‚ä¸‹ï¼š</p>
<h3 id="1-segmentæ®µ">1. <strong>Segmentï¼ˆæ®µï¼‰</strong></h3>
<ul>
<li>Lucene å°†æ‰€æœ‰æ–‡æ¡£åˆ†æ‰¹å¤„ç†å¹¶å†™å…¥ç§°ä¸º <strong>Segment</strong> çš„å°æ–‡ä»¶é›†åˆä¸­ã€‚</li>
<li>æ¯ä¸ª Segment æ˜¯åªè¯»çš„ï¼Œå¤šä¸ª Segment æœ€ç»ˆä¼šè¿›è¡Œåˆå¹¶ï¼ˆMergeï¼‰ã€‚</li>
<li>æ–‡æ¡£åˆ é™¤æˆ–æ›´æ–°å¹¶éçœŸæ­£åˆ é™¤ï¼Œè€Œæ˜¯â€œæ‰“ä¸Šåˆ é™¤æ ‡è®°â€ï¼ˆæ ‡è®°ä¸º deletedï¼‰ã€‚</li>
</ul>
<h3 id="2-inverted-indexå€’æ’ç´¢å¼•">2. <strong>Inverted Indexï¼ˆå€’æ’ç´¢å¼•ï¼‰</strong></h3>
<ul>
<li>æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œç”¨äºå®ç°å…¨æ–‡æœç´¢ã€‚</li>
<li>ä¸¾ä¾‹è¯´æ˜ï¼š
<ul>
<li>ä¸‰ä¸ªæ–‡æ¡£ï¼š
<ul>
<li>D1: &quot;Elasticsearch is fast&quot;</li>
<li>D2: &quot;Search is powerful&quot;</li>
<li>D3: &quot;Fast and scalable search&quot;</li>
</ul>
</li>
<li>å€’æ’ç´¢å¼•ç»“æœå¦‚ä¸‹ï¼š</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Term</th>
<th>Document IDs</th>
</tr>
</thead>
<tbody>
<tr>
<td>elasticsearch</td>
<td>D1</td>
</tr>
<tr>
<td>fast</td>
<td>D1, D3</td>
</tr>
<tr>
<td>search</td>
<td>D2, D3</td>
</tr>
<tr>
<td>powerful</td>
<td>D2</td>
</tr>
</tbody>
</table>
<ul>
<li>ES æŸ¥è¯¢æ—¶é¦–å…ˆæŸ¥æ‰¾å…³é”®è¯å¯¹åº”çš„æ–‡æ¡£ IDï¼Œå†æå–åŒ¹é…çš„æ–‡æ¡£ã€‚</li>
</ul>
<h3 id="3-columnar-storage-for-aggregationåˆ—å¼å­˜å‚¨">3. <strong>Columnar Storage for Aggregationï¼ˆåˆ—å¼å­˜å‚¨ï¼‰</strong></h3>
<ul>
<li>ES ä¸ºèšåˆæ“ä½œï¼ˆå¦‚ avg, sum, termsï¼‰æä¾›äº†ç±»ä¼¼åˆ—å¼å­˜å‚¨çš„ <strong>Doc Values</strong>ã€‚</li>
<li><strong>Doc Values</strong> æ˜¯ä¸€ç§åå‘å­˜å‚¨æ–¹å¼ï¼Œå°†å­—æ®µå€¼å•ç‹¬å­˜å‚¨ï¼Œä¾¿äºå¿«é€Ÿèšåˆã€‚</li>
</ul>
<hr>
<h2 id="ä¸‰-elasticsearch-çš„æ•°æ®ç»“æ„æ„æˆ">ä¸‰ã€Elasticsearch çš„æ•°æ®ç»“æ„æ„æˆ</h2>
<table>
<thead>
<tr>
<th>ç»“æ„å±‚çº§</th>
<th>å«ä¹‰</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cluster</td>
<td>é›†ç¾¤</td>
<td>åŒ…å«å¤šä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰</td>
</tr>
<tr>
<td>Node</td>
<td>èŠ‚ç‚¹</td>
<td>ES å®ä¾‹ï¼Œå¯å­˜å¤šä¸ªåˆ†ç‰‡</td>
</tr>
<tr>
<td>Index</td>
<td>ç´¢å¼•</td>
<td>ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„è¡¨</td>
</tr>
<tr>
<td>Typeï¼ˆå·²åºŸå¼ƒï¼‰</td>
<td>æ–‡æ¡£ç±»å‹</td>
<td>7.0 ä¹‹åå¼ƒç”¨</td>
</tr>
<tr>
<td>Document</td>
<td>æ–‡æ¡£</td>
<td>JSON æ ¼å¼ç»“æ„åŒ–æ•°æ®</td>
</tr>
<tr>
<td>Field</td>
<td>å­—æ®µ</td>
<td>æ–‡æ¡£ä¸­çš„é”®å€¼å¯¹</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="å››-å­˜å‚¨æ€§èƒ½ä¼˜åŒ–æœºåˆ¶">å››ã€å­˜å‚¨æ€§èƒ½ä¼˜åŒ–æœºåˆ¶</h2>
<h3 id="1-å€’æ’ç´¢å¼•ä¼˜åŒ–">1. <strong>å€’æ’ç´¢å¼•ä¼˜åŒ–</strong></h3>
<ul>
<li>ä½¿ç”¨ <strong>åˆ†è¯å™¨ï¼ˆAnalyzerï¼‰</strong> æå–å…³é”®è¯ï¼ˆTokenï¼‰ï¼Œæ„å»ºé«˜æ•ˆçš„å€’æ’ç´¢å¼•ã€‚</li>
<li>æ”¯æŒè‡ªå®šä¹‰åˆ†è¯ç­–ç•¥ï¼ˆå¦‚ IK ä¸­æ–‡åˆ†è¯å™¨ã€edge_ngram å‰ç¼€ç´¢å¼•ç­‰ï¼‰ã€‚</li>
</ul>
<h3 id="2-åˆ—å¼-doc-values">2. <strong>åˆ—å¼ Doc Values</strong></h3>
<ul>
<li>èšåˆæŸ¥è¯¢ã€æ’åºã€è„šæœ¬è®¿é—®ç­‰åœºæ™¯ä¸­ï¼ŒES ä½¿ç”¨ Doc Values å¿«é€Ÿè¯»å–å­—æ®µå€¼ï¼Œè€Œä¸éå†å€’æ’ç´¢å¼•ã€‚</li>
<li>é€‚ç”¨äºéæ–‡æœ¬å­—æ®µï¼ˆå¦‚æ•°å­—ã€æ—¥æœŸã€keywordï¼‰ã€‚</li>
</ul>
<h3 id="3-segment-merge-ç­–ç•¥">3. <strong>Segment Merge ç­–ç•¥</strong></h3>
<ul>
<li>åå°åˆå¹¶å¤šä¸ªå° Segment ä¸ºå¤§ Segmentï¼Œé™ä½æ–‡ä»¶å¥æŸ„æ¶ˆè€—ã€æå‡æ£€ç´¢æ€§èƒ½ã€‚</li>
<li>é‡‡ç”¨ <strong>Lucene Tiered Merge Policy</strong>ï¼ˆåˆ†å±‚åˆå¹¶ç­–ç•¥ï¼‰ã€‚</li>
</ul>
<h3 id="4-å‹ç¼©ä¸ç¼–ç ">4. <strong>å‹ç¼©ä¸ç¼–ç </strong></h3>
<ul>
<li>æ–‡æœ¬å­—æ®µï¼šä½¿ç”¨ LZ4 æˆ– ZSTD å‹ç¼©ï¼ˆèŠ‚çœç©ºé—´ï¼Œæå‡ I/Oï¼‰ã€‚</li>
<li>æ•°å€¼å­—æ®µï¼šä½¿ç”¨ <strong>Packed Ints</strong> ç¼–ç ï¼ˆç´§å‡‘ã€èŠ‚çœå†…å­˜ï¼‰ã€‚</li>
</ul>
<h3 id="5-ç¼“å­˜æœºåˆ¶">5. <strong>ç¼“å­˜æœºåˆ¶</strong></h3>
<ul>
<li><strong>File System Cache</strong>ï¼šä¾èµ–æ“ä½œç³»ç»Ÿé¡µç¼“å­˜ã€‚</li>
<li><strong>Field Data Cache</strong>ï¼šç”¨äºæ–‡æœ¬å­—æ®µæ’åºã€‚</li>
<li><strong>Query Cache / Request Cache</strong>ï¼šç¼“å­˜çƒ­ç‚¹æŸ¥è¯¢ç»“æœï¼Œæå‡å¹¶å‘å¤„ç†æ•ˆç‡ã€‚</li>
</ul>
<hr>
<h2 id="äº”-å†™å…¥è¿‡ç¨‹è¯¦è§£">äº”ã€å†™å…¥è¿‡ç¨‹è¯¦è§£</h2>
<ol>
<li><strong>æ•°æ®æ¥æ”¶</strong>ï¼šæ–‡æ¡£ä»¥ JSON æ ¼å¼é€šè¿‡ REST API æˆ–å®¢æˆ·ç«¯ SDK æäº¤è‡³ ESã€‚</li>
<li><strong>Routing</strong>ï¼šé€šè¿‡ <code>_id</code> æˆ–è·¯ç”±å€¼ç¡®å®šå†™å…¥å“ªä¸ªä¸»åˆ†ç‰‡ã€‚</li>
<li><strong>åˆ†æä¸åˆ†è¯</strong>ï¼šå­—æ®µå€¼é€šè¿‡åˆ†è¯å™¨è¿›è¡Œåˆ†è§£ã€‚</li>
<li><strong>ç´¢å¼•æ„å»º</strong>ï¼š
<ul>
<li>æ–‡æœ¬å­—æ®µ â†’ å€’æ’ç´¢å¼• + å¯é€‰ Doc Valuesï¼›</li>
<li>keywordã€æ•°å€¼å­—æ®µ â†’ Doc Valuesï¼ˆç”¨äºèšåˆï¼‰ï¼›</li>
</ul>
</li>
<li><strong>åˆ·æ–°æœºåˆ¶ï¼ˆRefreshï¼‰</strong>ï¼š
<ul>
<li>æ¯éš”é»˜è®¤ 1s å°†å†™å…¥å†…å­˜çš„ Segment åˆ·æ–°ä¸ºå¯æœç´¢çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>Flushï¼ˆæŒä¹…åŒ–ï¼‰</strong>ï¼š
<ul>
<li>å°† Segment æ–‡ä»¶æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚</li>
</ul>
</li>
<li><strong>å‰¯æœ¬åŒæ­¥</strong>ï¼šä¸»åˆ†ç‰‡å†™å…¥æˆåŠŸåï¼Œå¼‚æ­¥å°†æ•°æ®å¤åˆ¶åˆ°å‰¯æœ¬åˆ†ç‰‡ã€‚</li>
</ol>
<hr>
<h2 id="å…­-å­˜å‚¨ç©ºé—´ç¤ºæ„å›¾é€»è¾‘ä¸ç‰©ç†">å…­ã€å­˜å‚¨ç©ºé—´ç¤ºæ„å›¾ï¼ˆé€»è¾‘ä¸ç‰©ç†ï¼‰</h2>
<pre><code class="language-text">Cluster
 â””â”€â”€ Node A
     â”œâ”€â”€ Index: logs-2025-06
     â”‚   â”œâ”€â”€ Shard 0 (Primary)
     â”‚   â”‚   â””â”€â”€ Segment_0 -&gt; .fdt, .fdx, .tii, .tis, .doc
     â”‚   â””â”€â”€ Shard 0 (Replica)
     â””â”€â”€ Index: products
         â”œâ”€â”€ Shard 1 (Primary)
         â””â”€â”€ Shard 1 (Replica)
</code></pre>
<hr>
<h2 id="ä¸ƒ-æ€»ç»“es-å­˜å‚¨æ€§èƒ½ç‰¹ç‚¹">ä¸ƒã€æ€»ç»“ï¼šES å­˜å‚¨æ€§èƒ½ç‰¹ç‚¹</h2>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å€’æ’ç´¢å¼•</td>
<td>é«˜æ•ˆæ–‡æœ¬æœç´¢ï¼Œå…¨æ–‡æ£€ç´¢æ ¸å¿ƒ</td>
</tr>
<tr>
<td>Segment ç»“æ„</td>
<td>åªå†™è¿½åŠ  + åˆå¹¶ï¼Œé€‚åˆå†™å¤šè¯»å¤š</td>
</tr>
<tr>
<td>Doc Values</td>
<td>æ”¯æŒåˆ—å¼è®¿é—®ï¼Œèšåˆä¸æ’åºé«˜æ•ˆ</td>
</tr>
<tr>
<td>é«˜å‹ç¼©ç‡</td>
<td>LZ4/ZSTD/Packed Ints ç­‰å‡å°‘å­˜å‚¨ç©ºé—´</td>
</tr>
<tr>
<td>è‡ªåŠ¨åˆ†ç‰‡ä¸å‰¯æœ¬</td>
<td>é«˜å¯ç”¨ï¼Œæ˜“æ‰©å±•</td>
</tr>
<tr>
<td>å†™å…¥å»¶è¿Ÿä¼˜åŒ–</td>
<td>å¼‚æ­¥åˆ·æ–°ã€ç¼“å­˜å±‚æ§åˆ¶ï¼Œæé«˜åå</td>
</tr>
</tbody>
</table>
<hr>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ <strong>Elasticsearch å®˜æ–¹å®¢æˆ·ç«¯</strong> åˆ†åˆ«ç”¨ <strong>Javaï¼ˆHigh Level Rest Client / Java API Clientï¼‰</strong> å’Œ <strong>.NETï¼ˆNEST å®¢æˆ·ç«¯ï¼‰</strong> å®ç°çš„åŸºæœ¬æ“ä½œç¤ºä¾‹ï¼Œæ¶µç›–ï¼š</p>
<ul>
<li>èŠ‚ç‚¹è¿æ¥ï¼ˆå®¢æˆ·ç«¯åˆå§‹åŒ–ï¼‰</li>
<li>ç´¢å¼•åˆ›å»º</li>
<li>æ–‡æ¡£æ’å…¥</li>
<li>æ–‡æ¡£æŸ¥è¯¢</li>
</ul>
<hr>
<h2 id="ä¸€-java-ä»£ç åŸºäº-elasticsearch-java-api-client">âœ… ä¸€ã€Java ä»£ç ï¼ˆåŸºäº Elasticsearch Java API Clientï¼‰</h2>
<blockquote>
<p>æ”¯æŒ ES 7.x ä¸ 8.xï¼ˆæ¨èä½¿ç”¨æ–°ç‰ˆæœ¬ <code>co.elastic.clients.elasticsearch.ElasticsearchClient</code>ï¼‰</p>
</blockquote>
<h3 id="1-maven-ä¾èµ–">1. Maven ä¾èµ–</h3>
<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;co.elastic.clients&lt;/groupId&gt;
  &lt;artifactId&gt;elasticsearch-java&lt;/artifactId&gt;
  &lt;version&gt;8.12.0&lt;/version&gt; &lt;!-- æ ¹æ®å®é™…ç‰ˆæœ¬è°ƒæ•´ --&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="2-åˆå§‹åŒ–å®¢æˆ·ç«¯">2. åˆå§‹åŒ–å®¢æˆ·ç«¯</h3>
<pre><code class="language-java">import co.elastic.clients.elasticsearch.ElasticsearchClient;
import co.elastic.clients.elasticsearch._types.ElasticsearchException;
import co.elastic.clients.transport.rest_client.RestClientTransport;
import co.elastic.clients.json.jackson.JacksonJsonpMapper;
import org.apache.http.HttpHost;
import org.elasticsearch.client.RestClient;

RestClient restClient = RestClient.builder(
    new HttpHost(&quot;localhost&quot;, 9200)).build();

ElasticsearchClient client = new ElasticsearchClient(
    new RestClientTransport(restClient, new JacksonJsonpMapper()));
</code></pre>
<h3 id="3-åˆ›å»ºç´¢å¼•">3. åˆ›å»ºç´¢å¼•</h3>
<pre><code class="language-java">client.indices().create(c -&gt; c
    .index(&quot;test-index&quot;)
    .settings(s -&gt; s.numberOfShards(&quot;1&quot;).numberOfReplicas(&quot;1&quot;))
    .mappings(m -&gt; m
        .properties(&quot;user&quot;, p -&gt; p.text(t -&gt; t.analyzer(&quot;standard&quot;)))
        .properties(&quot;age&quot;, p -&gt; p.integer(i -&gt; i))
        .properties(&quot;message&quot;, p -&gt; p.text(t -&gt; t))
    )
);
</code></pre>
<h3 id="4-æ’å…¥æ–‡æ¡£">4. æ’å…¥æ–‡æ¡£</h3>
<pre><code class="language-java">import java.util.Map;

client.index(i -&gt; i
    .index(&quot;test-index&quot;)
    .id(&quot;1&quot;)
    .document(Map.of(
        &quot;user&quot;, &quot;alice&quot;,
        &quot;age&quot;, 30,
        &quot;message&quot;, &quot;Elasticsearch is fast!&quot;
    ))
);
</code></pre>
<h3 id="5-æŸ¥è¯¢æ–‡æ¡£">5. æŸ¥è¯¢æ–‡æ¡£</h3>
<pre><code class="language-java">var response = client.get(g -&gt; g
    .index(&quot;test-index&quot;)
    .id(&quot;1&quot;),
    Map.class
);

System.out.println(&quot;æ–‡æ¡£å†…å®¹: &quot; + response.source());
</code></pre>
<hr>
<h2 id="äºŒ-net-ä»£ç åŸºäº-nest-å®¢æˆ·ç«¯">âœ… äºŒã€.NET ä»£ç ï¼ˆåŸºäº NEST å®¢æˆ·ç«¯ï¼‰</h2>
<blockquote>
<p>NEST æ˜¯å®˜æ–¹æ¨èçš„ .NET é«˜çº§å®¢æˆ·ç«¯ï¼Œé€‚é… Elasticsearch 7.x å’Œ 8.xã€‚</p>
</blockquote>
<h3 id="1-å®‰è£…-nuget-åŒ…">1. å®‰è£… NuGet åŒ…</h3>
<pre><code class="language-bash">dotnet add package NEST --version 7.17.0
</code></pre>
<h3 id="2-åˆå§‹åŒ–å®¢æˆ·ç«¯-2">2. åˆå§‹åŒ–å®¢æˆ·ç«¯</h3>
<pre><code class="language-csharp">using Nest;

var settings = new ConnectionSettings(new Uri(&quot;http://localhost:9200&quot;))
    .DefaultIndex(&quot;test-index&quot;);

var client = new ElasticClient(settings);
</code></pre>
<h3 id="3-åˆ›å»ºç´¢å¼•-2">3. åˆ›å»ºç´¢å¼•</h3>
<pre><code class="language-csharp">var createIndexResponse = client.Indices.Create(&quot;test-index&quot;, c =&gt; c
    .Map(m =&gt; m
        .Properties(p =&gt; p
            .Text(t =&gt; t.Name(&quot;user&quot;))
            .Number(n =&gt; n.Name(&quot;age&quot;).Type(NumberType.Integer))
            .Text(t =&gt; t.Name(&quot;message&quot;))
        )
    )
);
</code></pre>
<h3 id="4-æ’å…¥æ–‡æ¡£-2">4. æ’å…¥æ–‡æ¡£</h3>
<pre><code class="language-csharp">var doc = new
{
    user = &quot;bob&quot;,
    age = 28,
    message = &quot;NEST is awesome&quot;
};

var indexResponse = client.IndexDocument(doc);
</code></pre>
<h3 id="5-æŸ¥è¯¢æ–‡æ¡£-2">5. æŸ¥è¯¢æ–‡æ¡£</h3>
<pre><code class="language-csharp">var response = client.Get&lt;object&gt;(&quot;1&quot;, g =&gt; g.Index(&quot;test-index&quot;));

Console.WriteLine($&quot;æ–‡æ¡£å†…å®¹ï¼š{response.Source}&quot;);
</code></pre>
<hr>
<h2 id="ä¸‰-è¿è¡Œå‰å‡†å¤‡">âœ… ä¸‰ã€è¿è¡Œå‰å‡†å¤‡</h2>
<h3 id="å¯åŠ¨-elasticsearch">âœ… å¯åŠ¨ Elasticsearch</h3>
<ul>
<li>å®‰è£…å¹¶å¯åŠ¨ Elasticsearchï¼ˆå»ºè®®ç‰ˆæœ¬ï¼š7.17+ æˆ– 8.xï¼‰</li>
<li>ç¡®ä¿ç›‘å¬ <code>localhost:9200</code>ï¼ˆå¯é€šè¿‡ <code>curl http://localhost:9200</code> éªŒè¯ï¼‰</li>
</ul>
<hr>
<h2 id="å››-è¡¥å……è¯´æ˜">âœ… å››ã€è¡¥å……è¯´æ˜</h2>
<table>
<thead>
<tr>
<th>è¯­è¨€</th>
<th>å®¢æˆ·ç«¯</th>
<th>é€‚é…ç‰ˆæœ¬</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>Java</td>
<td><code>elasticsearch-java</code> / <code>HighLevelRestClient</code></td>
<td>7.x / 8.x</td>
<td>å®˜æ–¹æ¨èï¼Œå¼ºç±»å‹</td>
</tr>
<tr>
<td>.NET</td>
<td><code>NEST</code></td>
<td>7.x</td>
<td>æŸ¥è¯¢ DSL çµæ´»ï¼Œä½¿ç”¨å¯¹è±¡æ˜ å°„</td>
</tr>
<tr>
<td>JS</td>
<td><code>@elastic/elasticsearch</code></td>
<td>7.x / 8.x</td>
<td>Node.js é¡¹ç›®å¸¸ç”¨</td>
</tr>
<tr>
<td>Python</td>
<td><code>elasticsearch</code></td>
<td>7.x / 8.x</td>
<td>ç®€æ´ï¼Œé€‚åˆè„šæœ¬ä»»åŠ¡</td>
</tr>
</tbody>
</table>
<hr>
<p>å¥½çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†æ‰©å±• Java å’Œ .NET å®¢æˆ·ç«¯çš„ä»£ç ç¤ºä¾‹ï¼Œæ¶µç›– <strong>åˆ†é¡µæŸ¥è¯¢</strong>ã€<strong>å¸ƒå°”æŸ¥è¯¢</strong>ã€<strong>èšåˆæŸ¥è¯¢</strong>ã€<strong>ä¸­æ–‡åˆ†è¯è‡ªå®šä¹‰é…ç½®</strong> ç­‰å¸¸è§çš„ Elasticsearch æ“ä½œã€‚</p>
<hr>
<h2 id="ä¸€-java-ä»£ç æ‰©å±•ä½¿ç”¨-elasticsearch-java-api-client">âœ… ä¸€ã€Java ä»£ç æ‰©å±•ï¼ˆä½¿ç”¨ Elasticsearch Java API Clientï¼‰</h2>
<h3 id="1-åˆ†é¡µæŸ¥è¯¢search-with-pagination">1. <strong>åˆ†é¡µæŸ¥è¯¢ï¼ˆSearch with Paginationï¼‰</strong></h3>
<p>åˆ†é¡µæŸ¥è¯¢æ˜¯å¸¸è§çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ã€‚ä¸‹é¢æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ã€‚</p>
<pre><code class="language-java">import co.elastic.clients.elasticsearch.core.SearchRequest;
import co.elastic.clients.elasticsearch.core.SearchResponse;
import co.elastic.clients.elasticsearch.core.search.Hit;
import java.util.List;

SearchRequest searchRequest = new SearchRequest.Builder()
    .index(&quot;test-index&quot;)
    .from(0)    // èµ·å§‹é¡µï¼ˆåˆ†é¡µçš„èµ·ç‚¹ï¼‰
    .size(10)   // æ¯é¡µè¿”å›çš„æ–‡æ¡£æ•°
    .build();

SearchResponse&lt;Map&gt; searchResponse = client.search(searchRequest, Map.class);

List&lt;Hit&lt;Map&gt;&gt; hits = searchResponse.hits().hits();
hits.forEach(hit -&gt; {
    System.out.println(&quot;Document ID: &quot; + hit.id() + &quot;, Content: &quot; + hit.source());
});
</code></pre>
<ul>
<li><code>from(0)</code> è¡¨ç¤ºæŸ¥è¯¢çš„èµ·å§‹ä½ç½®ï¼Œä»ç¬¬ 1 æ¡è®°å½•å¼€å§‹ã€‚</li>
<li><code>size(10)</code> è¡¨ç¤ºæ¯é¡µè¿”å› 10 æ¡è®°å½•ã€‚</li>
</ul>
<h3 id="2-å¸ƒå°”æŸ¥è¯¢boolean-query">2. <strong>å¸ƒå°”æŸ¥è¯¢ï¼ˆBoolean Queryï¼‰</strong></h3>
<p>å¸ƒå°”æŸ¥è¯¢å¯ä»¥ç»“åˆå¤šä¸ªæ¡ä»¶æ¥ç­›é€‰ç»“æœï¼Œä¾‹å¦‚ <code>must</code>ï¼ˆå¿…é¡»åŒ¹é…ï¼‰ã€<code>should</code>ï¼ˆå¯ä»¥åŒ¹é…ï¼‰ã€<code>must_not</code>ï¼ˆä¸èƒ½åŒ¹é…ï¼‰ç­‰ã€‚</p>
<pre><code class="language-java">import co.elastic.clients.elasticsearch.core.SearchRequest;
import co.elastic.clients.elasticsearch.core.SearchResponse;
import co.elastic.clients.elasticsearch.query.BoolQuery;
import co.elastic.clients.elasticsearch.query.Query;

SearchRequest searchRequest = new SearchRequest.Builder()
    .index(&quot;test-index&quot;)
    .query(q -&gt; q
        .bool(b -&gt; b
            .must(Query.of(q1 -&gt; q1.term(t -&gt; t.field(&quot;user&quot;).value(&quot;alice&quot;)))) // å¿…é¡»åŒ¹é… &quot;user&quot; å­—æ®µå€¼ä¸º &quot;alice&quot;
            .filter(Query.of(q2 -&gt; q2.range(r -&gt; r.field(&quot;age&quot;).gte(&quot;20&quot;))))  // &quot;age&quot; &gt;= 20
            .mustNot(Query.of(q3 -&gt; q3.match(m -&gt; m.field(&quot;message&quot;).query(&quot;error&quot;))))  // &quot;message&quot; å­—æ®µä¸èƒ½åŒ…å« &quot;error&quot;
    )
    .build();

SearchResponse&lt;Map&gt; searchResponse = client.search(searchRequest, Map.class);
</code></pre>
<ul>
<li><code>must</code>ï¼šåŒ¹é…çš„æ¡ä»¶å¿…é¡»æ»¡è¶³ï¼ˆä¾‹å¦‚åŒ¹é… &quot;user&quot; å­—æ®µä¸º &quot;alice&quot;ï¼‰ã€‚</li>
<li><code>filter</code>ï¼šè¿‡æ»¤æ¡ä»¶ï¼Œé€šå¸¸ä¸å‚ä¸è¯„åˆ†ã€‚</li>
<li><code>mustNot</code>ï¼šå¿…é¡»ä¸åŒ¹é…çš„æ¡ä»¶ï¼ˆä¾‹å¦‚ &quot;message&quot; å­—æ®µä¸èƒ½åŒ…å« &quot;error&quot;ï¼‰ã€‚</li>
</ul>
<h3 id="3-èšåˆæŸ¥è¯¢aggregation-query">3. <strong>èšåˆæŸ¥è¯¢ï¼ˆAggregation Queryï¼‰</strong></h3>
<p>èšåˆæŸ¥è¯¢å¯ç”¨äºç»Ÿè®¡æ•°æ®ï¼ˆå¦‚æ±‚å’Œã€å¹³å‡å€¼ã€æœ€å°å€¼ã€æœ€å¤§å€¼ã€åˆ†ç»„ç­‰ï¼‰ã€‚</p>
<pre><code class="language-java">import co.elastic.clients.elasticsearch.core.SearchRequest;
import co.elastic.clients.elasticsearch.core.SearchResponse;
import co.elastic.clients.elasticsearch.aggregation.AvgAggregation;
import co.elastic.clients.elasticsearch.aggregation.Aggregation;
import co.elastic.clients.elasticsearch.aggregation.AggregationResult;

SearchRequest searchRequest = new SearchRequest.Builder()
    .index(&quot;test-index&quot;)
    .aggregations(&quot;avg_age&quot;, a -&gt; a.avg(avg -&gt; avg.field(&quot;age&quot;)))  // æ±‚ &quot;age&quot; å­—æ®µçš„å¹³å‡å€¼
    .build();

SearchResponse&lt;Map&gt; searchResponse = client.search(searchRequest, Map.class);

AggregationResult avgAge = searchResponse.aggregations().get(&quot;avg_age&quot;);
System.out.println(&quot;Average Age: &quot; + avgAge.value());
</code></pre>
<ul>
<li><code>aggregations(&quot;avg_age&quot;, a -&gt; a.avg(...))</code>ï¼šåœ¨æŸ¥è¯¢ä¸­åŒ…å«äº†èšåˆæ“ä½œï¼Œè®¡ç®— &quot;age&quot; å­—æ®µçš„å¹³å‡å€¼ã€‚</li>
</ul>
<h3 id="4-ä¸­æ–‡åˆ†è¯è‡ªå®šä¹‰analyzer">4. <strong>ä¸­æ–‡åˆ†è¯è‡ªå®šä¹‰ï¼ˆAnalyzerï¼‰</strong></h3>
<p>Elasticsearch æ”¯æŒè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œç‰¹åˆ«æ˜¯ä¸­æ–‡åˆ†è¯ï¼Œå¸¸ç”¨çš„åˆ†è¯å™¨æœ‰ IK åˆ†è¯å™¨ç­‰ã€‚</p>
<pre><code class="language-java">client.indices().create(c -&gt; c
    .index(&quot;test-index&quot;)
    .settings(s -&gt; s
        .analysis(a -&gt; a
            .tokenizer(&quot;ik_max_word&quot;, t -&gt; t.type(&quot;ik_max_word&quot;)) // ä½¿ç”¨ IK åˆ†è¯å™¨
        )
    )
    .mappings(m -&gt; m
        .properties(&quot;message&quot;, p -&gt; p.text(t -&gt; t.analyzer(&quot;ik_max_word&quot;)))
    )
);
</code></pre>
<ul>
<li>é€šè¿‡é…ç½®åˆ†è¯å™¨ <code>ik_max_word</code>ï¼Œå¯ä»¥æ›´å¥½åœ°å¤„ç†ä¸­æ–‡æ–‡æœ¬çš„åˆ†è¯ã€‚</li>
</ul>
<hr>
<h2 id="äºŒ-net-ä»£ç æ‰©å±•ä½¿ç”¨-nest-å®¢æˆ·ç«¯">âœ… äºŒã€.NET ä»£ç æ‰©å±•ï¼ˆä½¿ç”¨ NEST å®¢æˆ·ç«¯ï¼‰</h2>
<h3 id="1-åˆ†é¡µæŸ¥è¯¢search-with-pagination-2">1. <strong>åˆ†é¡µæŸ¥è¯¢ï¼ˆSearch with Paginationï¼‰</strong></h3>
<pre><code class="language-csharp">var searchResponse = client.Search&lt;object&gt;(s =&gt; s
    .Index(&quot;test-index&quot;)
    .From(0)  // èµ·å§‹é¡µ
    .Size(10) // æ¯é¡µæ¡æ•°
);

foreach (var hit in searchResponse.Hits)
{
    Console.WriteLine($&quot;Document ID: {hit.Id}, Content: {hit.Source}&quot;);
}
</code></pre>
<ul>
<li><code>From(0)</code> å’Œ <code>Size(10)</code> ç”¨äºæ§åˆ¶åˆ†é¡µï¼Œè¿”å›ç¬¬ 1 é¡µçš„ 10 æ¡è®°å½•ã€‚</li>
</ul>
<h3 id="2-å¸ƒå°”æŸ¥è¯¢boolean-query-2">2. <strong>å¸ƒå°”æŸ¥è¯¢ï¼ˆBoolean Queryï¼‰</strong></h3>
<pre><code class="language-csharp">var boolSearchResponse = client.Search&lt;object&gt;(s =&gt; s
    .Index(&quot;test-index&quot;)
    .Query(q =&gt; q
        .Bool(b =&gt; b
            .Must(mu =&gt; mu.Term(&quot;user&quot;, &quot;alice&quot;)) // &quot;user&quot; å­—æ®µä¸º &quot;alice&quot;
            .Filter(fi =&gt; fi.Range(r =&gt; r.Field(&quot;age&quot;).GreaterThanOrEquals(20))) // &quot;age&quot; &gt;= 20
            .MustNot(mu =&gt; mu.Match(m =&gt; m.Field(&quot;message&quot;).Query(&quot;error&quot;))) // &quot;message&quot; å­—æ®µä¸åŒ…å« &quot;error&quot;
        )
    )
);
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>Must</code>, <code>Filter</code>, å’Œ <code>MustNot</code> ç»„åˆä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ã€‚</li>
</ul>
<h3 id="3-èšåˆæŸ¥è¯¢aggregation-query-2">3. <strong>èšåˆæŸ¥è¯¢ï¼ˆAggregation Queryï¼‰</strong></h3>
<pre><code class="language-csharp">var aggregationResponse = client.Search&lt;object&gt;(s =&gt; s
    .Index(&quot;test-index&quot;)
    .Aggregations(a =&gt; a
        .Average(&quot;avg_age&quot;, avg =&gt; avg.Field(&quot;age&quot;)) // èšåˆè®¡ç®— &quot;age&quot; å­—æ®µçš„å¹³å‡å€¼
    )
);

Console.WriteLine($&quot;Average Age: {aggregationResponse.Aggregations.Average(&quot;avg_age&quot;).Value}&quot;);
</code></pre>
<ul>
<li><code>Aggregations</code> ç”¨äºèšåˆæ“ä½œï¼Œè®¡ç®— &quot;age&quot; å­—æ®µçš„å¹³å‡å€¼ã€‚</li>
</ul>
<h3 id="4-ä¸­æ–‡åˆ†è¯è‡ªå®šä¹‰analyzer-2">4. <strong>ä¸­æ–‡åˆ†è¯è‡ªå®šä¹‰ï¼ˆAnalyzerï¼‰</strong></h3>
<pre><code class="language-csharp">var createIndexResponse = client.Indices.Create(&quot;test-index&quot;, c =&gt; c
    .Settings(s =&gt; s
        .Analysis(a =&gt; a
            .Tokenizers(t =&gt; t
                .Custom(&quot;ik_max_word&quot;, tokenizer =&gt; tokenizer.Type(&quot;ik_max_word&quot;)) // é…ç½® IK åˆ†è¯å™¨
            )
            .Analyzers(an =&gt; an
                .Custom(&quot;ik_max_word&quot;, ca =&gt; ca.Tokenizer(&quot;ik_max_word&quot;))
            )
        )
    )
    .Map(m =&gt; m
        .Properties(p =&gt; p
            .Text(t =&gt; t.Name(&quot;message&quot;).Analyzer(&quot;ik_max_word&quot;))
        )
    )
);
</code></pre>
<ul>
<li>é…ç½®è‡ªå®šä¹‰çš„ä¸­æ–‡åˆ†è¯å™¨ï¼Œå¦‚ IK åˆ†è¯å™¨ï¼Œç”¨äº <code>message</code> å­—æ®µã€‚</li>
</ul>
<hr>
<h2 id="ä¸‰-æ€»ç»“">âœ… ä¸‰ã€æ€»ç»“</h2>
<table>
<thead>
<tr>
<th>æ“ä½œç±»å‹</th>
<th>Java ä»£ç å®ç°</th>
<th>.NET ä»£ç å®ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åˆ†é¡µæŸ¥è¯¢</strong></td>
<td><code>from(0).size(10)</code> æŸ¥è¯¢æŒ‡å®šé¡µæ•°å’Œæ¯é¡µæ•°æ®é‡</td>
<td><code>From(0).Size(10)</code></td>
</tr>
<tr>
<td><strong>å¸ƒå°”æŸ¥è¯¢</strong></td>
<td><code>bool()</code> æŸ¥è¯¢å¤šæ¡ä»¶ç»„åˆ</td>
<td><code>Bool()</code> æŸ¥è¯¢å¤šæ¡ä»¶ç»„åˆ</td>
</tr>
<tr>
<td><strong>èšåˆæŸ¥è¯¢</strong></td>
<td><code>aggregations(&quot;avg_age&quot;, a -&gt; a.avg(...))</code> èšåˆæŸå­—æ®µæ•°æ®</td>
<td><code>Aggregations(a =&gt; a.Average(&quot;avg_age&quot;, avg =&gt; avg.Field(&quot;age&quot;)))</code> èšåˆæ•°æ®</td>
</tr>
<tr>
<td><strong>ä¸­æ–‡åˆ†è¯</strong></td>
<td>é…ç½® <code>ik_max_word</code> åˆ†è¯å™¨</td>
<td>é…ç½® <code>ik_max_word</code> åˆ†è¯å™¨</td>
</tr>
</tbody>
</table>
<hr>
<hr>
<h1 id="redis-å’Œ-elasticsearch-æ˜¯å¦æ”¯æŒå­˜å‚¨åŠ¨æ€ç»“æ„">âœ… Redis å’Œ Elasticsearch æ˜¯å¦æ”¯æŒå­˜å‚¨åŠ¨æ€ç»“æ„ï¼Ÿ</h1>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯åŠ¨æ€ç»“æ„">ä¸€ã€ä»€ä¹ˆæ˜¯â€œåŠ¨æ€ç»“æ„â€ï¼Ÿ</h2>
<p>æ‰€è°“ <strong>åŠ¨æ€ç»“æ„æ•°æ®</strong>ï¼ŒæŒ‡çš„æ˜¯å­—æ®µ <strong>ä¸å›ºå®š</strong>ã€<strong>ä¸åŒæ–‡æ¡£æˆ–è®°å½•ä¹‹é—´å­—æ®µå¯èƒ½ä¸åŒ</strong>ã€<strong>ç»“æ„å¯åœ¨è¿è¡Œæ—¶è‡ªç”±å˜åŠ¨</strong> çš„æ•°æ®ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="language-json">// æ–‡æ¡£ A
{ &quot;user&quot;: &quot;alice&quot;, &quot;age&quot;: 25 }

// æ–‡æ¡£ B
{ &quot;user&quot;: &quot;bob&quot;, &quot;hobbies&quot;: [&quot;reading&quot;, &quot;coding&quot;] }

// æ–‡æ¡£ C
{ &quot;ip&quot;: &quot;127.0.0.1&quot;, &quot;location&quot;: &quot;Beijing&quot; }
</code></pre>
<hr>
<h2 id="äºŒ-redis-æ˜¯å¦æ”¯æŒåŠ¨æ€ç»“æ„">äºŒã€Redis æ˜¯å¦æ”¯æŒåŠ¨æ€ç»“æ„ï¼Ÿ</h2>
<p>âœ… <strong>æ”¯æŒï¼Œä½†ä¸å…·å¤‡ç»“æ„æ„ŸçŸ¥èƒ½åŠ›</strong></p>
<ul>
<li>Redis æ˜¯ä¸€ä¸ª <strong>æ— æ¨¡å¼ï¼ˆschemalessï¼‰</strong> çš„é”®å€¼æ•°æ®åº“ï¼Œä½ å¯ä»¥å¾€ä¸€ä¸ª Hashã€String æˆ– JSON å¯¹è±¡é‡ŒåŠ¨æ€æ·»åŠ ä»»æ„å­—æ®µã€‚</li>
<li>ä½¿ç”¨æ–¹å¼ä¸Šæ²¡æœ‰ç»“æ„é™åˆ¶ï¼Œä½†ä¸ä¼šè‡ªåŠ¨è¯†åˆ«ç»“æ„æˆ–åšç±»å‹æ¨æ–­ã€‚</li>
</ul>
<h3 id="ä¸¾ä¾‹ä½¿ç”¨-redisjsonredisæ¨¡å—å­˜å‚¨åŠ¨æ€ç»“æ„">ä¸¾ä¾‹ï¼šä½¿ç”¨ RedisJSONï¼ˆRedisæ¨¡å—ï¼‰å­˜å‚¨åŠ¨æ€ç»“æ„</h3>
<pre><code class="language-bash"># Redis JSON ç¤ºä¾‹ï¼ˆä½¿ç”¨ ReJSON æ¨¡å—ï¼‰
JSON.SET doc:1 $ '{&quot;user&quot;:&quot;alice&quot;,&quot;age&quot;:25}'
JSON.SET doc:2 $ '{&quot;user&quot;:&quot;bob&quot;,&quot;hobbies&quot;:[&quot;reading&quot;,&quot;coding&quot;]}'
</code></pre>
<ul>
<li>âœ”ï¸ å­—æ®µå¯ä»¥ä¸åŒï¼ŒåŠ¨æ€å¢åˆ å­—æ®µå®Œå…¨æ”¯æŒï¼›</li>
<li>âŒ ä¸èƒ½åŸºäºå­—æ®µè‡ªåŠ¨ç´¢å¼•æˆ–æŸ¥è¯¢ï¼ˆé™¤éä½ ç”¨ RedisSearch è¿›è¡Œé…ç½®ï¼‰ã€‚</li>
</ul>
<hr>
<h2 id="ä¸‰-elasticsearch-æ˜¯å¦æ”¯æŒåŠ¨æ€ç»“æ„">ä¸‰ã€Elasticsearch æ˜¯å¦æ”¯æŒåŠ¨æ€ç»“æ„ï¼Ÿ</h2>
<p>âœ… <strong>æ”¯æŒåŠ¨æ€ç»“æ„ï¼ˆé»˜è®¤å¼€å¯ï¼‰ï¼Œå¹¶å¯æ§åˆ¶è¡Œä¸º</strong></p>
<h3 id="é»˜è®¤è¡Œä¸º">é»˜è®¤è¡Œä¸ºï¼š</h3>
<ul>
<li>å½“ä½ å‘ ES ç´¢å¼•ä¸­æ’å…¥æ–°å­—æ®µæ—¶ï¼Œ<strong>é»˜è®¤ä¼šè‡ªåŠ¨è¯†åˆ«å­—æ®µç±»å‹å¹¶åŠ¨æ€æ·»åŠ åˆ°æ˜ å°„ï¼ˆmappingï¼‰ä¸­</strong>ã€‚</li>
<li>è¿™ç§æœºåˆ¶è¢«ç§°ä¸ºï¼š<strong>Dynamic Mappingï¼ˆåŠ¨æ€æ˜ å°„ï¼‰</strong></li>
</ul>
<h3 id="ç¤ºä¾‹">ç¤ºä¾‹ï¼š</h3>
<pre><code class="language-bash">PUT /my-index/_doc/1
{
  &quot;user&quot;: &quot;alice&quot;,
  &quot;age&quot;: 25
}

PUT /my-index/_doc/2
{
  &quot;user&quot;: &quot;bob&quot;,
  &quot;hobbies&quot;: [&quot;reading&quot;, &quot;coding&quot;]
}

PUT /my-index/_doc/3
{
  &quot;ip&quot;: &quot;127.0.0.1&quot;,
  &quot;location&quot;: &quot;Beijing&quot;
}
</code></pre>
<p>ğŸ” ES ä¼šè‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹ç±»å‹æ˜ å°„ï¼š</p>
<pre><code class="language-json">{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;user&quot;: { &quot;type&quot;: &quot;text&quot; },
      &quot;age&quot;: { &quot;type&quot;: &quot;integer&quot; },
      &quot;hobbies&quot;: { &quot;type&quot;: &quot;text&quot; },
      &quot;ip&quot;: { &quot;type&quot;: &quot;ip&quot; },
      &quot;location&quot;: { &quot;type&quot;: &quot;text&quot; }
    }
  }
}
</code></pre>
<hr>
<h2 id="å››-åŠ¨æ€ç»“æ„æ§åˆ¶é€‰é¡¹elasticsearch-ä¸“å±">å››ã€åŠ¨æ€ç»“æ„æ§åˆ¶é€‰é¡¹ï¼ˆElasticsearch ä¸“å±ï¼‰</h2>
<p>ä½ å¯ä»¥åœ¨ç´¢å¼•çš„ <code>mappings</code> ä¸­é…ç½® <code>dynamic</code> å±æ€§æ¥æ§åˆ¶åŠ¨æ€å­—æ®µè¡Œä¸ºï¼š</p>
<table>
<thead>
<tr>
<th>é…ç½®</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dynamic: true</code>ï¼ˆé»˜è®¤ï¼‰</td>
<td>è‡ªåŠ¨æ·»åŠ æ–°å­—æ®µå¹¶æ˜ å°„ç±»å‹</td>
</tr>
<tr>
<td><code>dynamic: false</code></td>
<td>å¿½ç•¥æ–°å­—æ®µï¼ˆä¸æ·»åŠ ï¼Œä¸ç´¢å¼•ï¼‰</td>
</tr>
<tr>
<td><code>dynamic: strict</code></td>
<td>å¦‚æœæ’å…¥äº†æœªå£°æ˜å­—æ®µï¼Œä¼šæŠ›å‡ºé”™è¯¯ï¼Œç¦æ­¢ä»»æ„åŠ¨æ€å­—æ®µæ·»åŠ </td>
</tr>
</tbody>
</table>
<h3 id="ç¤ºä¾‹-2">ç¤ºä¾‹ï¼š</h3>
<pre><code class="language-json">PUT /my-index
{
  &quot;mappings&quot;: {
    &quot;dynamic&quot;: &quot;strict&quot;, 
    &quot;properties&quot;: {
      &quot;user&quot;: { &quot;type&quot;: &quot;text&quot; }
    }
  }
}
</code></pre>
<p>æ­¤æ—¶ï¼Œå¦‚æœä½ å†™å…¥ä¸€ä¸ªå« <code>age</code> å­—æ®µçš„æ–‡æ¡£ï¼Œä¼šè§¦å‘é”™è¯¯ï¼Œå› ä¸ºè¯¥å­—æ®µæœªåœ¨æ˜ å°„ä¸­å®šä¹‰ã€‚</p>
<hr>
<h2 id="äº”-æ€»ç»“å¯¹æ¯”">äº”ã€æ€»ç»“å¯¹æ¯”</h2>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>Redis</th>
<th>Elasticsearch</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŠ¨æ€ç»“æ„æ”¯æŒ</td>
<td>âœ… å®Œå…¨æ”¯æŒï¼ˆè‡ªç”±ç»“æ„ã€æ— æ¨¡å¼ï¼‰</td>
<td>âœ… é»˜è®¤æ”¯æŒåŠ¨æ€å­—æ®µï¼ˆå¯æ§åˆ¶ dynamic çº§åˆ«ï¼‰</td>
</tr>
<tr>
<td>ç±»å‹è‡ªåŠ¨è¯†åˆ«ä¸ç´¢å¼•</td>
<td>âŒ ä¸è‡ªåŠ¨è¯†åˆ«å­—æ®µç±»å‹æˆ–ç´¢å¼•</td>
<td>âœ… è‡ªåŠ¨è¯†åˆ«å­—æ®µç±»å‹å¹¶æ˜ å°„å…¥ç´¢å¼•</td>
</tr>
<tr>
<td>ç»“æ„æ§åˆ¶èƒ½åŠ›</td>
<td>âŒ æ— ç»“æ„æ§åˆ¶ï¼ˆæ‰€æœ‰æ•°æ®ä¸ºé»‘ç›’ï¼‰</td>
<td>âœ… å¯é™åˆ¶å­—æ®µå˜åŒ–ï¼ˆdynamic: strict/falseï¼‰</td>
</tr>
<tr>
<td>æŸ¥è¯¢èƒ½åŠ›ï¼ˆåŸºäºå­—æ®µï¼‰</td>
<td>âš ï¸ éœ€ RedisSearch æ‰©å±•</td>
<td>âœ… å¼ºå¤§æŸ¥è¯¢æ”¯æŒ</td>
</tr>
<tr>
<td>é€‚åˆçš„åº”ç”¨</td>
<td>çµæ´»å­˜å–ã€å®æ—¶ç¼“å­˜ã€ç»“æ„å¯å˜æ€§å¼º</td>
<td>æ•°æ®æŸ¥è¯¢ä¸åˆ†æã€ç»“æ„å˜åŒ–é€‚åº¦çš„æ–‡æ¡£ç³»ç»Ÿ</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="ç»“è®º">âœ… ç»“è®ºï¼š</h2>
<ul>
<li>Redis é€‚åˆå®Œå…¨åŠ¨æ€ã€å˜åŒ–é¢‘ç¹ã€ä¸éœ€è¦ç»“æ„ç´¢å¼•çš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼šç¼“å­˜ã€ä¼šè¯çŠ¶æ€ã€ä¸´æ—¶æ•°æ®ï¼‰ã€‚</li>
<li>Elasticsearch æ›´é€‚åˆç»“æ„å˜åŒ–ä¸å¤ªé¢‘ç¹ã€<strong>ä½†éœ€è¦å­—æ®µçº§æœç´¢ã€åˆ†æä¸ç´¢å¼•</strong>çš„åŠç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚æ—¥å¿—ã€æ–‡æ¡£ã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰ã€‚</li>
</ul>
<p>å¦‚æœä½ æœ‰ä¸€ä»½ç»å¸¸å˜åŒ–å­—æ®µç»“æ„çš„æ•°æ®é›†ï¼Œä½†åˆéœ€è¦å…¨æ–‡æœç´¢æˆ–èšåˆæŸ¥è¯¢ï¼Œ<strong>å¯ä»¥è€ƒè™‘ä½¿ç”¨ Elasticsearch å¼€å¯ <code>dynamic: true</code> æ¨¡å¼å¹¶å®šæœŸæ•´ç† mapping</strong>ã€‚</p>
<hr>
<p>Elasticsearch çš„ REST API å†™å…¥è¯­å¥ï¼š</p>
<hr>
<h2 id="ä¸€-ç»“æ„è¯´æ˜put-my-index_doc1">âœ… ä¸€ã€ç»“æ„è¯´æ˜ï¼š<code>PUT /my-index/_doc/1</code></h2>
<p>è¿™æ¡å‘½ä»¤çš„æ ¼å¼ä¸ºï¼š</p>
<pre><code>PUT /{ç´¢å¼•å}/{ç±»å‹}/{æ–‡æ¡£ID}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<table>
<thead>
<tr>
<th>è·¯å¾„éƒ¨åˆ†</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>my-index</code></td>
<td>âœ… ç´¢å¼•åã€‚ç›¸å½“äºæ•°æ®åº“é‡Œçš„ä¸€ä¸ªâ€œè¡¨â€</td>
</tr>
<tr>
<td><code>_doc</code></td>
<td>âœ… æ–‡æ¡£ç±»å‹ã€‚ES 7.x å¼€å§‹é»˜è®¤å›ºå®šä¸º <code>_doc</code>ï¼ˆæ–‡æ¡£ç±»å‹æ¦‚å¿µå·²åºŸå¼ƒï¼‰</td>
</tr>
<tr>
<td><code>1</code></td>
<td>âœ… æ–‡æ¡£ IDã€‚å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–‡æ¡£ã€‚ç”¨æˆ·å¯ä»¥æŒ‡å®šï¼ˆå¦‚è¿™é‡Œæ˜¯ <code>1</code>ã€<code>2</code>ã€<code>3</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥è®© ES è‡ªåŠ¨ç”Ÿæˆ</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="äºŒ-ç¤ºä¾‹è§£é‡Š">âœ… äºŒã€ç¤ºä¾‹è§£é‡Š</h2>
<pre><code class="language-http">PUT /my-index/_doc/1
{
  &quot;user&quot;: &quot;alice&quot;,
  &quot;age&quot;: 25
}
</code></pre>
<ul>
<li><strong>my-index</strong>ï¼šç´¢å¼•åï¼Œè¡¨ç¤ºè¿™äº›æ–‡æ¡£éƒ½å±äºä¸€ä¸ªæ•°æ®é›†åˆã€‚</li>
<li><strong>_doc</strong>ï¼šç±»å‹åï¼ˆç°åœ¨æ˜¯å›ºå®šå†™æ³•ï¼Œå·²ä¸å»ºè®®è‡ªå®šä¹‰ç±»å‹ï¼‰ã€‚</li>
<li><strong>1</strong>ï¼šæ–‡æ¡£çš„ IDï¼ˆå¯é€šè¿‡å®ƒè¿›è¡ŒæŸ¥è¯¢æˆ–æ›´æ–°ï¼‰ã€‚</li>
<li><strong>æ­£æ–‡éƒ¨åˆ†</strong>ï¼šæ˜¯ JSON æ ¼å¼çš„æ•°æ®ï¼ŒES ä¼šè‡ªåŠ¨è¯†åˆ«å­—æ®µå¹¶å­˜å‚¨ã€‚</li>
</ul>
<hr>
<h2 id="ä¸‰-æ’å…¥æ•°æ®åå¦‚ä½•æŸ¥è¯¢">âœ… ä¸‰ã€æ’å…¥æ•°æ®åï¼Œå¦‚ä½•æŸ¥è¯¢ï¼Ÿ</h2>
<h3 id="1-æŸ¥è¯¢æŸä¸ªæ–‡æ¡£é€šè¿‡-id">1. æŸ¥è¯¢æŸä¸ªæ–‡æ¡£ï¼ˆé€šè¿‡ IDï¼‰</h3>
<pre><code class="language-http">GET /my-index/_doc/1
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-json">{
  &quot;_index&quot;: &quot;my-index&quot;,
  &quot;_id&quot;: &quot;1&quot;,
  &quot;_source&quot;: {
    &quot;user&quot;: &quot;alice&quot;,
    &quot;age&quot;: 25
  }
}
</code></pre>
<hr>
<h3 id="2-æŸ¥è¯¢æ•´ä¸ªç´¢å¼•è¿”å›æ‰€æœ‰æ–‡æ¡£">2. æŸ¥è¯¢æ•´ä¸ªç´¢å¼•ï¼ˆè¿”å›æ‰€æœ‰æ–‡æ¡£ï¼‰</h3>
<pre><code class="language-http">GET /my-index/_search
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥å¸¦åˆ†é¡µå‚æ•°ï¼š</p>
<pre><code class="language-http">GET /my-index/_search?from=0&amp;size=10
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="language-json">{
  &quot;hits&quot;: {
    &quot;total&quot;: 3,
    &quot;hits&quot;: [
      {
        &quot;_id&quot;: &quot;1&quot;,
        &quot;_source&quot;: { &quot;user&quot;: &quot;alice&quot;, &quot;age&quot;: 25 }
      },
      {
        &quot;_id&quot;: &quot;2&quot;,
        &quot;_source&quot;: { &quot;user&quot;: &quot;bob&quot;, &quot;hobbies&quot;: [&quot;reading&quot;, &quot;coding&quot;] }
      },
      {
        &quot;_id&quot;: &quot;3&quot;,
        &quot;_source&quot;: { &quot;ip&quot;: &quot;127.0.0.1&quot;, &quot;location&quot;: &quot;Beijing&quot; }
      }
    ]
  }
}
</code></pre>
<hr>
<h3 id="3-æ¡ä»¶æŸ¥è¯¢åŒ¹é…å­—æ®µ">3. æ¡ä»¶æŸ¥è¯¢ï¼šåŒ¹é…å­—æ®µ</h3>
<p>ä¾‹å¦‚æŸ¥æ‰¾ user ä¸º bob çš„æ–‡æ¡£ï¼š</p>
<pre><code class="language-http">GET /my-index/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;user&quot;: &quot;bob&quot;
    }
  }
}
</code></pre>
<hr>
<h2 id="å››-æ–‡æ¡£-id-çš„ä½œç”¨">âœ… å››ã€æ–‡æ¡£ ID çš„ä½œç”¨</h2>
<table>
<thead>
<tr>
<th>æ–‡æ¡£ ID</th>
<th>åŠŸèƒ½è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1</code>ã€<code>2</code>ã€<code>3</code></td>
<td>æ˜¯æ¯ä¸ªæ–‡æ¡£åœ¨è¯¥ç´¢å¼•ä¸‹çš„å”¯ä¸€æ ‡è¯†ã€‚å¯ä»¥è‡ªå·±æŒ‡å®šï¼Œä¹Ÿå¯ä»¥è®© ES è‡ªåŠ¨ç”Ÿæˆï¼ˆä¸å†™ ID å°±è¡Œï¼‰</td>
</tr>
<tr>
<td>æŒ‡å®š ID çš„å¥½å¤„</td>
<td>å¯ä»¥é€šè¿‡ <code>GET /index/_doc/{id}</code> å¿«é€Ÿå®šä½/æ›´æ–°/åˆ é™¤æ–‡æ¡£</td>
</tr>
<tr>
<td>è‡ªåŠ¨ ID çš„å¥½å¤„</td>
<td>ä¸éœ€è¦ç®¡ç† IDï¼Œé€‚åˆæ‰¹é‡å†™å…¥ã€ä¸å…³å¿ƒå•ä¸ªæ–‡æ¡£ ID çš„åœºæ™¯</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="æ€»ç»“">âœ… æ€»ç»“</h2>
<table>
<thead>
<tr>
<th>å…ƒç´ </th>
<th>ç¤ºä¾‹</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç´¢å¼•</td>
<td><code>my-index</code></td>
<td>ç±»ä¼¼äºè¡¨ï¼Œå­˜å‚¨æŸç±»æ•°æ®çš„é›†åˆ</td>
</tr>
<tr>
<td>ç±»å‹</td>
<td><code>_doc</code></td>
<td>ES 7.x å¼€å§‹å›ºå®šä¸º <code>_doc</code>ï¼Œå°†åºŸå¼ƒ</td>
</tr>
<tr>
<td>æ–‡æ¡£ ID</td>
<td><code>1</code>ã€<code>2</code>ã€<code>3</code></td>
<td>æ¯æ¡æ•°æ®çš„å”¯ä¸€ IDï¼ˆæ‰‹åŠ¨æˆ–è‡ªåŠ¨ç”Ÿæˆï¼‰</td>
</tr>
<tr>
<td>æ–‡æ¡£å†…å®¹</td>
<td>JSON æ ¼å¼çš„ç»“æ„åŒ–æ•°æ®</td>
<td>ä»»æ„ç»“æ„ï¼Œå­—æ®µå¯å˜</td>
</tr>
<tr>
<td>æŸ¥è¯¢è¯­å¥</td>
<td><code>_search</code> + DSL æŸ¥è¯¢</td>
<td>æ”¯æŒå…¨æ–‡ã€ç»“æ„åŒ–ã€å¤šæ¡ä»¶åŒ¹é…</td>
</tr>
</tbody>
</table>
<hr>
<p>ä¸‹é¢æˆ‘å°†åˆ†åˆ«ç”¨ <strong>Javaï¼ˆElasticsearch Java API Clientï¼‰</strong> å’Œ <strong>.NETï¼ˆNEST å®¢æˆ·ç«¯ï¼‰</strong> æ¼”ç¤ºå¦‚ä½•æ“ä½œ<strong>åŠ¨æ€ç»“æ„çš„å•†å“æ•°æ®æ–‡æ¡£</strong>ï¼š</p>
<ul>
<li>âœ… ä½¿ç”¨åŠ¨æ€ç»“æ„ï¼ˆå­—æ®µä¸å›ºå®šã€ç±»å‹å¯å˜ï¼‰</li>
<li>âœ… æ’å…¥å¤šæ ·å¤æ‚çš„æ–‡æ¡£ï¼ˆå­—æ®µä¸åŒã€åµŒå¥—å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰</li>
<li>âœ… æŸ¥è¯¢ã€æœç´¢ã€è§£æè¿™äº›åŠ¨æ€æ–‡æ¡£</li>
<li>âœ… å¼ºè°ƒå¦‚ä½•è®© Elasticsearch æ¥å—å¹¶å­˜å‚¨è¿™ç§â€œç»“æ„ä¸ç¡®å®šâ€çš„å•†å“æ•°æ®</li>
</ul>
<hr>
<h2 id="ä¸€-å•†å“åŠ¨æ€ç»“æ„ç¤ºä¾‹json">âœ… ä¸€ã€å•†å“åŠ¨æ€ç»“æ„ç¤ºä¾‹ï¼ˆJSONï¼‰</h2>
<p>æˆ‘ä»¬å®šä¹‰å‡ ä¸ªå•†å“ï¼Œæ¯ä¸ªç»“æ„éƒ½ä¸åŒï¼Œæ¨¡æ‹ŸçœŸå®å•†åŸåœºæ™¯ï¼š</p>
<pre><code class="language-json">// å•†å“ A
{
  &quot;name&quot;: &quot;iPhone 15&quot;,
  &quot;brand&quot;: &quot;Apple&quot;,
  &quot;price&quot;: 8999,
  &quot;specs&quot;: {
    &quot;color&quot;: &quot;black&quot;,
    &quot;storage&quot;: &quot;256GB&quot;
  },
  &quot;tags&quot;: [&quot;phone&quot;, &quot;ios&quot;, &quot;5G&quot;]
}

// å•†å“ B
{
  &quot;name&quot;: &quot;ThinkPad X1&quot;,
  &quot;brand&quot;: &quot;Lenovo&quot;,
  &quot;price&quot;: 12999,
  &quot;weight&quot;: 1.2,
  &quot;specs&quot;: {
    &quot;cpu&quot;: &quot;i7&quot;,
    &quot;ram&quot;: &quot;16GB&quot;,
    &quot;ssd&quot;: &quot;512GB&quot;
  },
  &quot;accessories&quot;: [&quot;charger&quot;, &quot;bag&quot;],
  &quot;warranty&quot;: {
    &quot;period&quot;: &quot;2 years&quot;,
    &quot;international&quot;: true
  }
}

// å•†å“ C
{
  &quot;name&quot;: &quot;æ¸¸æˆé”®ç›˜&quot;,
  &quot;price&quot;: 499,
  &quot;features&quot;: [&quot;RGB&quot;, &quot;æœºæ¢°è½´&quot;, &quot;å¤šåª’ä½“æŒ‰é”®&quot;]
}
</code></pre>
<hr>
<h2 id="äºŒ-java-å®ç°ä½¿ç”¨-elasticsearch-java-api-client">âœ… äºŒã€Java å®ç°ï¼ˆä½¿ç”¨ Elasticsearch Java API Clientï¼‰</h2>
<h3 id="1-æ’å…¥åŠ¨æ€ç»“æ„å•†å“">1. æ’å…¥åŠ¨æ€ç»“æ„å•†å“</h3>
<p>æ— éœ€å›ºå®šæ¨¡å‹ç»“æ„ï¼Œç›´æ¥ä½¿ç”¨ <code>Map&lt;String, Object&gt;</code> å³å¯æ”¯æŒä»»æ„å­—æ®µã€‚</p>
<pre><code class="language-java">import co.elastic.clients.elasticsearch.ElasticsearchClient;
import co.elastic.clients.transport.rest_client.RestClientTransport;
import org.elasticsearch.client.RestClient;
import java.util.*;

RestClient restClient = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200)).build();
ElasticsearchClient client = new ElasticsearchClient(
    new RestClientTransport(restClient, new JacksonJsonpMapper()));

// å•†å“ A
Map&lt;String, Object&gt; productA = Map.of(
    &quot;name&quot;, &quot;iPhone 15&quot;,
    &quot;brand&quot;, &quot;Apple&quot;,
    &quot;price&quot;, 8999,
    &quot;specs&quot;, Map.of(&quot;color&quot;, &quot;black&quot;, &quot;storage&quot;, &quot;256GB&quot;),
    &quot;tags&quot;, List.of(&quot;phone&quot;, &quot;ios&quot;, &quot;5G&quot;)
);

// å•†å“ B
Map&lt;String, Object&gt; productB = Map.of(
    &quot;name&quot;, &quot;ThinkPad X1&quot;,
    &quot;brand&quot;, &quot;Lenovo&quot;,
    &quot;price&quot;, 12999,
    &quot;weight&quot;, 1.2,
    &quot;specs&quot;, Map.of(&quot;cpu&quot;, &quot;i7&quot;, &quot;ram&quot;, &quot;16GB&quot;, &quot;ssd&quot;, &quot;512GB&quot;),
    &quot;accessories&quot;, List.of(&quot;charger&quot;, &quot;bag&quot;),
    &quot;warranty&quot;, Map.of(&quot;period&quot;, &quot;2 years&quot;, &quot;international&quot;, true)
);

// å•†å“ C
Map&lt;String, Object&gt; productC = Map.of(
    &quot;name&quot;, &quot;æ¸¸æˆé”®ç›˜&quot;,
    &quot;price&quot;, 499,
    &quot;features&quot;, List.of(&quot;RGB&quot;, &quot;æœºæ¢°è½´&quot;, &quot;å¤šåª’ä½“æŒ‰é”®&quot;)
);

// æ’å…¥
client.index(i -&gt; i.index(&quot;products&quot;).id(&quot;A&quot;).document(productA));
client.index(i -&gt; i.index(&quot;products&quot;).id(&quot;B&quot;).document(productB));
client.index(i -&gt; i.index(&quot;products&quot;).id(&quot;C&quot;).document(productC));
</code></pre>
<h3 id="2-æŸ¥è¯¢æ‰€æœ‰å•†å“">2. æŸ¥è¯¢æ‰€æœ‰å•†å“</h3>
<pre><code class="language-java">var res = client.search(s -&gt; s.index(&quot;products&quot;).query(q -&gt; q.matchAll(m -&gt; m)), Map.class);
res.hits().hits().forEach(hit -&gt; System.out.println(hit.id() + &quot;: &quot; + hit.source()));
</code></pre>
<h3 id="3-æŸ¥è¯¢å“ç‰Œä¸º-lenovo-çš„å•†å“">3. æŸ¥è¯¢å“ç‰Œä¸º Lenovo çš„å•†å“</h3>
<pre><code class="language-java">var result = client.search(s -&gt; s
    .index(&quot;products&quot;)
    .query(q -&gt; q.match(m -&gt; m.field(&quot;brand&quot;).query(&quot;Lenovo&quot;))),
    Map.class
);
result.hits().hits().forEach(hit -&gt; System.out.println(hit.source()));
</code></pre>
<hr>
<h2 id="ä¸‰-net-å®ç°ä½¿ç”¨-nest-å®¢æˆ·ç«¯">âœ… ä¸‰ã€.NET å®ç°ï¼ˆä½¿ç”¨ NEST å®¢æˆ·ç«¯ï¼‰</h2>
<blockquote>
<p>ä½¿ç”¨åŒ¿åå¯¹è±¡æˆ– <code>Dictionary&lt;string, object&gt;</code> å®ç°åŠ¨æ€å­—æ®µ</p>
</blockquote>
<h3 id="1-åˆå§‹åŒ–å®¢æˆ·ç«¯">1. åˆå§‹åŒ–å®¢æˆ·ç«¯</h3>
<pre><code class="language-csharp">var settings = new ConnectionSettings(new Uri(&quot;http://localhost:9200&quot;))
    .DefaultIndex(&quot;products&quot;);
var client = new ElasticClient(settings);
</code></pre>
<h3 id="2-æ’å…¥åŠ¨æ€ç»“æ„å•†å“">2. æ’å…¥åŠ¨æ€ç»“æ„å•†å“</h3>
<pre><code class="language-csharp">client.Index(new Dictionary&lt;string, object&gt;
{
    { &quot;name&quot;, &quot;iPhone 15&quot; },
    { &quot;brand&quot;, &quot;Apple&quot; },
    { &quot;price&quot;, 8999 },
    { &quot;specs&quot;, new Dictionary&lt;string, object&gt; {
        { &quot;color&quot;, &quot;black&quot; }, { &quot;storage&quot;, &quot;256GB&quot; }
    }},
    { &quot;tags&quot;, new[] { &quot;phone&quot;, &quot;ios&quot;, &quot;5G&quot; } }
}, i =&gt; i.Id(&quot;A&quot;));

client.Index(new Dictionary&lt;string, object&gt;
{
    { &quot;name&quot;, &quot;ThinkPad X1&quot; },
    { &quot;brand&quot;, &quot;Lenovo&quot; },
    { &quot;price&quot;, 12999 },
    { &quot;weight&quot;, 1.2 },
    { &quot;specs&quot;, new Dictionary&lt;string, object&gt; {
        { &quot;cpu&quot;, &quot;i7&quot; }, { &quot;ram&quot;, &quot;16GB&quot; }, { &quot;ssd&quot;, &quot;512GB&quot; }
    }},
    { &quot;accessories&quot;, new[] { &quot;charger&quot;, &quot;bag&quot; } },
    { &quot;warranty&quot;, new Dictionary&lt;string, object&gt; {
        { &quot;period&quot;, &quot;2 years&quot; }, { &quot;international&quot;, true }
    }}
}, i =&gt; i.Id(&quot;B&quot;));

client.Index(new Dictionary&lt;string, object&gt;
{
    { &quot;name&quot;, &quot;æ¸¸æˆé”®ç›˜&quot; },
    { &quot;price&quot;, 499 },
    { &quot;features&quot;, new[] { &quot;RGB&quot;, &quot;æœºæ¢°è½´&quot;, &quot;å¤šåª’ä½“æŒ‰é”®&quot; } }
}, i =&gt; i.Id(&quot;C&quot;));
</code></pre>
<h3 id="3-æŸ¥è¯¢æ‰€æœ‰å•†å“">3. æŸ¥è¯¢æ‰€æœ‰å•†å“</h3>
<pre><code class="language-csharp">var searchAll = client.Search&lt;Dictionary&lt;string, object&gt;&gt;(s =&gt; s
    .Index(&quot;products&quot;)
    .Query(q =&gt; q.MatchAll())
);

foreach (var doc in searchAll.Hits)
{
    Console.WriteLine($&quot;ID: {doc.Id} -&gt; {doc.Source[&quot;name&quot;]}&quot;);
}
</code></pre>
<h3 id="4-æ¡ä»¶æŸ¥è¯¢å“ç‰Œä¸º-lenovo">4. æ¡ä»¶æŸ¥è¯¢ï¼šå“ç‰Œä¸º Lenovo</h3>
<pre><code class="language-csharp">var result = client.Search&lt;Dictionary&lt;string, object&gt;&gt;(s =&gt; s
    .Index(&quot;products&quot;)
    .Query(q =&gt; q.Match(m =&gt; m.Field(&quot;brand&quot;).Query(&quot;Lenovo&quot;)))
);

foreach (var hit in result.Hits)
{
    Console.WriteLine($&quot;Brand = Lenovo -&gt; {hit.Source[&quot;name&quot;]}&quot;);
}
</code></pre>
<hr>
<h2 id="å››-æ€»ç»“å»ºè®®">âœ… å››ã€æ€»ç»“å»ºè®®</h2>
<table>
<thead>
<tr>
<th>è¦ç‚¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ•°æ®ç»“æ„æ˜¯å¦å¿…é¡»å›ºå®šï¼Ÿ</td>
<td>âŒ ä¸éœ€è¦ï¼Œä½¿ç”¨ <code>Map</code> æˆ– <code>Dictionary&lt;string, object&gt;</code> å®ç°åŠ¨æ€ç»“æ„</td>
</tr>
<tr>
<td>Elasticsearch æ”¯æŒåŠ¨æ€å­—æ®µå—ï¼Ÿ</td>
<td>âœ… é»˜è®¤ <code>dynamic: true</code>ï¼Œä¼šè‡ªåŠ¨æ·»åŠ æ–°å­—æ®µ</td>
</tr>
<tr>
<td>æ€§èƒ½æ˜¯å¦å—å½±å“ï¼Ÿ</td>
<td>âœ”ï¸ æŸ¥è¯¢æ€§èƒ½ OKï¼Œä½†å­—æ®µå¤ªå¤šæ—¶å»ºè®®å®šæœŸæ•´ç† mapping æˆ–è®¾ç½®æ¨¡æ¿</td>
</tr>
<tr>
<td>å¦‚ä½•æŸ¥è¯¢åµŒå¥—å­—æ®µï¼Ÿ</td>
<td>å¯ä½¿ç”¨åµŒå¥—æŸ¥è¯¢ï¼ˆnested queryï¼‰æˆ– dot-notationï¼ˆå¦‚ <code>specs.color</code>ï¼‰</td>
</tr>
</tbody>
</table>
<hr>

            </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://yuzhupeng.top/myblogs/post/java-spring-rules-andkai-fa-gui-fan/">
                  <h3 class="post-title">
                    java spring rules &amp;å¼€å‘è§„èŒƒ
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
